### 파티셔닝

- **파티셔닝이란?**
    - 테이블이나 인덱스를 작은 파티션(Partition) 단위로 나누어 관리하는 기법
    - 데이터베이스를 분산 처리하여 성능이 저하되는 것을 방지하고 관리를 보다 편하게 함<br></br>
- **장단점**
    - **장점**
        - **가용성(Availability)** : 물리적인 노드 분리에 따라 전체 DB 내의 데이터 손상 가능성이 줄어들고, 데이터 가용성이 향상됨
        - **관리 용이성(Manageability)** : 큰 테이블을 제거하여 관리를 쉽게할 수 있다
        - **성능(Perfomance)** : 특정 DML과 Query 성능을 향상시키며 대용량 데이터 write 환경에서 효율적이다.<br></br>
    - **단점**
        - 테이블간 join비용 증가
        - 파티션 제약: 테이블과 인덱스를 별도로 파티션 불가<br></br>
- 종류
    - **수직 파티셔닝(Vertical Partitioning)**

      ![Untitled](https://github.com/5dotseven/cs-basic-study/assets/118906074/78ffba61-a542-4926-9426-38e81e92bdff)

        - 컬럼을 나눠 새로운 테이블로 만들어서 나눠갖는 것
        - 하나의 엔티티를 2개 이상으로 분리하는 작업
        - **장단점**
          - **장점**
              - 자주 사용하는 칼럼을 분리하여 성능 향상
              - 같은 타입의 데이터가 저장되어 데이터 압축률을 높임
              - 조회 시 필요 없는 칼럼을 조회하지 않아도 되므로 성능상의 이점이 있다.
          - **단점**
              - 데이터를 찾는 과정이 기존보다 복잡하므로 Latency가 증가한다.<br></br>

    - **수평 파티셔닝 **(Horizontal Partitioning)****

      ![Untitled (1)](https://github.com/5dotseven/cs-basic-study/assets/118906074/e92dd2c2-0ad4-4a2c-b5c4-d14653266861)

        - 하나의 테이블의 각 행을 다른 테이블에 분산시키는 것
        - 그림 과 같이 5개의 행이 있는 테이블을 각각 3개, 2개의 행을 가진 테이블로 쪼갤 수 있다.
        - 샤딩과 유사하지만 아예 같지는 않다.
        - **장단점**
          - **장점**
              - 데이터의 개수를 기준으로 나누어 파티셔닝한다.
              - 데이터의 개수와 인덱스의 개수가 줄어들어 성능이 향상
          - **단점**
              - 데이터를 찾는 과정이 기존보다 복잡하여 지연시간(Latency) 증가<br></br>
        - **파티셔닝 범위**
            - **범위 분할 (range partitioning)**
                - 연속적인 숫자나 날짜를 기준으로 파티셔닝 한다.
                - 분할 키 값이 범위 내에 있는지 여부로 구분한다.
                - 우편 번호, 날짜 등의 데이터에 적합하다<br></br>
            - **목록 분할 (list partitioning)**
                - 값 목록에 파티션을 할당 분할 키 값을 그 목록에 비추어 파티션을 선택
                - 특정 파티션에 저장될 데이터에 대한 명시적 제어 가능
                - 분포도가 비슷하며, 많은 SQL에서 해당 칼럼의 조건이 많이 들어오는 경우 유용하다<br></br>
            - **해시 분할 (hash partitioning)**
                - 파티션 키(Key)의 해시 값에 의한 파티셔닝이 이루어진다.
                - 균등한 데이터 분할이 가능하다.
                - 특정 데이터가 어느 Hash 파티션에 있는지 판단하기 어렵다
                - .해시 함수의 값에 따라 파티션에 포함할지 여부를 결정
                - 파티션을 위한 범위가 없는 데이터에 적합하다<br></br>
            - **합성 분할 (composite partitioning)**
                - 상기 기술을 결합하는 것을 의미한다. 즉, 파티션의 sub-partitioning을 뜻한다.
                - 큰 파티션에 대한 I/O 요청을 여러 파티션으로 분산할 수 있다.
                - 예를 들면 먼저 범위 분할하고, 다음에 해시 분할 같은 것을 생각할 수 있다.


출처

- https://repeater2487.tistory.com/41
- https://code-lab1.tistory.com/202