### OSI 7 계층 & TCP/IP 4 계층

- OSI 7 Layer란 국제 표준화 기구에서 정의한 모델로, **네트워크 통신이 일어나는 과정을 7단계로 나눈 것**
- 실제로는 OSI 7 Layer 모델보다는 **TCP/IP** 모델을 사용한다.<br></br>

**OSI 7 계층**

- 1 계층 - 물리(Physical) 계층
    - **전기적, 기계적 특성**을 이용하여 시스템 간 **물리적인 연결**을 담당
    - 데이터를 전기 신호(1, 0)로 변환하여 송수신하는 기능만 한다.
    - 통신 케이블, 리피터, 허브 등<br></br>
- 2 계층- 데이터 링크(DataLink) 계층
    - 네트워크 기기간 **데이터 전송을 관리**하고, **물리 주소** 부여
    - 물리 계층을 통해 송수신되는 정보의 흐름을 관리하여 안전한 통신의 흐름을 관리하고, **물리 주소**를 부여한다.
    - 이 계층에서 전송되는 데이터 단위 : 프레임(Frame)
    - 브리지, 스위치, 이더넷 등<br></br>
- 3 계층 - 네트워크(Network) 계층
    - **다른 네트워크와의 데이터 통신을 위한 경로 설정** 및 **논리 주소** 결정
    - 데이터를 목적지까지 **안전하고 빠르게 전달**하는 역할
    - 데이터 통신을 위한 **경로**를 설정하고, **논리주소(IP)**를 결정한다.
    - 이 계층에서 전송되는 데이터 단위 : 패킷(packet)
    - 장비 : 라우터<br></br>
- 4 계층 - 전송(Transport) 계층
    - 두 지점 간의 **신뢰성 있는 통신** 담당
    - 데이터 전송 중 손상, 유실 확인을 위한 오류 점검 기능을 한다. (check sum)
    - 목적지의 어떤 응용프로그램에 데이터를 전달해야 하는지 식별하는 기능을 한다.(port)
    - TCP, UDP 프로토콜<br></br>
- 5 계층 - 세션(Session) 계층
    - **세션 연결, 관리**를 담당한다.
    - TCP/IP 세션을 체결하고, 포트 번호를 기반으로 통신 세션을 구성한다.
    - API, Socket<br></br>
- 6 계층 : 표현(Presentation) 계층
    - 전송하는 **데이터의 표현 방식**을 결정(데이터 변환, 압축, 암호화 등)
    - 파일 인코딩, 압축, 암호화 등
    - JPEG, MPEG, GIF, ASCII 등<br></br>
- 7 계층 : 응용(Application) 계층
    - 응용 프로그램과 직접 연결하여 **응용 서비스를 제공**
    - HTTP 등<br></br>

**캡슐화(Encapsulation)와 역캡슐화(Decapsulation)**

![Untitled (2)](https://github.com/5dotseven/cs-basic-study/assets/118906074/f3b409ab-5c9d-416b-8e86-f18334963fc1)
- 왼쪽 위에서부터 아래로 각 계층에 따라 데이터를 전송할 때 필요한 정보를 담은 헤더를 붙인다.
- **캡슐화** : 응용 계층(7 계층)부터 물리 계층(1 계층)까지 7개의 계층을 지나며 헤더를 붙이는 과정
- **역캡슐화 :** 오른쪽에서 캡슐화되어있는 데이터를 받아서, 반대로 1 계층부터 7 계층까지 헤더를 읽고 해석하며 데이터를 수신하는 과정

### TCP/IP 4 계층

**TCP**

- 패킷 통신은 '데이터'를 작은 단위로 나누어 전송
- 순서나 내용이 섞이거나 유실될 위험 → **TCP 존재이유**
- **'패킷'을 정상적(온전하게)으로 받을 수 있도록 하는 프로토콜**
- 패킷의 **속도는 느리지만**, 순서에 맞고 손실되지 않게 받음 → 그렇지 않을 경우, 재요청

**IP**

- 패킷 데이터들을 **최대한 빠르게 특정 목적지로 보내는 프로토콜**

**TCP/IP**

- 즉, **두 가지 프로토콜 방식( "TCP/IP" )을 조합**하여 인터넷 통신하는 것
    - 송신자가 ⇨수신자에게 **IP**를 사용하여 최대한 **빨리 패킷 전송** 하면,**TCP**를 활용해 패킷을 **정상적으로 수신** 받는다. →정확하고 빠르게<br></br>

**OSI 7계층과 TCP/IP 4계층의 차이**

![Untitled (3)](https://github.com/5dotseven/cs-basic-study/assets/118906074/b784227c-7021-4a9a-8fba-5c8e5b03f019)

- **OSI 7 계층**
    - 네트워크 통신이 일어나는 과정을 **이론적으로 정의한 것**
    - 컴퓨터 간 패킷통신을 위해 거쳐야 하는 7개의 계층<br></br>
- **TCP/IP 4 계층**
    - 이론을 **실제로 사용하는 표준**
    - **TCP/IP 통신과정에 초점을 맞추어**, 그 외에 OSI 7계층은 좀 더 단순화 시킨 계층<br></br>
- 특징
    1. 계층별 간섭 최소화
    2. 특정 계층에 문제 발생시 -> 유지보수 용이
    3. 다른 계층 간의 데이터 전달까지 알 필요 x=> **데이터의 캡슐화 , 은닉화 (ㅇ)**


**TCP/IP 4계층**

![Untitled (4)](https://github.com/5dotseven/cs-basic-study/assets/118906074/76b47592-1c88-4361-b63a-cfe902ed21c4)

- **OSI 7 계층**의 **1, 2 계층**을 묶어서 **TCP/IP**의 **1 계층 네트워크 액세스 계층**이 되고,
- **5, 6, 7 계층**을 묶어서 **TCP/IP**의 **4 계층인 응용 계층**이 된다.<br></br>

- 1 계층 : 네트워크 엑세스 계층(Network Access Layer)
    - OSI 7 계층의 **물리 계층, 데이터링크 계층**에 해당다.
    - 물리적인 주소로 MAC을 사용한다.
    - LAN, 패킷망 등에 사용된다.<br></br>
- 2 계층 : 인터넷 계층(Internet Layer)
    - OSI 7 계층의 **네트워크 계층**에 해당한다.
    - 통신 노드 간의 IP 패킷을 전송하는 기능과 라우팅 기능을 담당한다.
    - 프로토콜 : IP, ARP, RARP<br></br>
- 3 계층 : 전송 계층(Transport Layer)
    - OSI 7 계층의 **전송 계층**에 해당한다.
    - 통신 노드 간 **데이터를 신뢰성 있게** 전송을 보장.
    - 역캡슐화에서 '포트번호'를 통해 데이터를 보다 더 **정확한 애플리케이션에 전달하는 역할**
    - IP와 Port를 이용하여 프로세스와 통신한다.
    - 프로토콜 : TCP, UDP<br></br>
- 4 계층 : 응용 계층(Application Layer)
    - OSI 7 계층의 **세션 계층, 표현 계층, 응용 계층**에 해당한다.
    - TCP/UDP 기반의 응용 프로그램을 구현할 때 사용한다.
    - 프로그램(브라우저)과 직접 상호작용하는 계층이다.
    - 프로토콜 : HTTP, FTP, SSH 등<br></br>

**면접질문**

**Q. 웹 서버 소프트웨어(Apache, Nginx)는 OSI 7계층 중 어디서 작동하나요?**

A. '웹 서버'는 HTTP 프로토콜을 사용해 html 데이터를 클라이언트에 제공하는 서버입니다. 그리고 HTTP 프로토콜은 OSI 7계층인 Application Layer에 위치해 있습니다.

브라우저와 서버 사이에 정보를 주고받기 위해 사용하며, Apache, Nginx는 웹 서버 중의 하나이므로 **Applicaion 계층**에서 작동합니다.<br></br>

**Q. 웹 서버 소프트웨어(Apache, Nginx)의 서버 간 라우팅 기능은 OSI 7계층 중 어디서 작동하나요?**

A. 라우터는 다른 네트워크와 통신하기 위해 사용하는 장치로, **현재의 네트워크에서 다른 네트워크로 패킷을 전송**합니다. 즉, 서버 간 라우팅 기능은 **네트워크 계층**에서 동작합니다.
<br></br><br></br><br></br>
출처

- [https://velog.io/@dabeen-jung/CS-관련-지식-네트워크2](https://velog.io/@dabeen-jung/CS-%EA%B4%80%EB%A0%A8-%EC%A7%80%EC%8B%9D-%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC2)
- [https://innovation123.tistory.com/154#7 계층 %3A 응용 계층(Application Layer)-1](https://innovation123.tistory.com/154#7%20%EA%B3%84%EC%B8%B5%20%3A%20%EC%9D%91%EC%9A%A9%20%EA%B3%84%EC%B8%B5(Application%20Layer)-1)