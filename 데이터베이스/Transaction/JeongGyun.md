# 데이터베이스 - 트랜잭션
## 트랜잭션이란?
트랜잭션(Transaction)은 데이터베이스의 상태를 변화시키기 위해 수행하는 작업의 논리적 단위 데이터베이스에서 SELECT, INSERT, UPDATE, DELETE와 같은 쿼리를 실행할 때, 이러한 작업들을 하나의 트랜잭션으로 묶어서 처리

### 트랜잭션과 Lock
트랜잭션을 수행할 때 데이터의 일관성을 유지하기 위해 Lock이 사용됨
> 트랜잭션중에 데이터를 보호하기 위해 Lock은 다른 세션이 해당 데이터를 수정하지 못하도록 막는 역할
- 공유 락(Shared Lock): 데이터를 읽기 위해 사용되는 락
- 배타 락(Exclusive Lock): 데이터를 쓰기 위해 사용되는 락

LocK 획득 시 다른 세션은 Lock이 해제될 때까지 대기
-> 이런 상황에서 교착상태가 발생할 수 있으므로 주의해야함
![스크린샷 2024-05-25 오전 12 07 32](https://github.com/5dotseven/cs-basic-study/assets/144773042/055f5b34-46c5-4c27-876d-182d43545a22)

### 트랜잭션의 특성 (ACID)
트랜잭션은 다음과 같은 4가지 특성을 가짐
- 원자성(Atomicity): 트랜잭션 내의 모든 작업이 성공적으로 완료되거나, 전혀 실행되지 않아야 함 -> 롤백
- 일관성(Consistency): 트랜잭션 실행 전후로 데이터베이스의 일관성이 유지되어야 함
- 격리성(Isolation): 트랜잭션 간에 서로 영향을 미치지 않아야 함
- 지속성(Durability): 트랜잭션이 성공적으로 완료되면 그 결과가 영구적으로 보장되어야 함 
### 트랜잭션의 상태
트랜잭션은 다음과 같은 상태를 가질 수 있음
- 활성(Active): 트랜잭션이 실행 중인 상태
- 부분 완료(Partially Committed): 트랜잭션의 모든 작업이 성공적으로 완료된 상태
- 완료(Committed): 트랜잭션이 성공적으로 완료된 상태
- 실패(Failed): 트랜잭션 중 하나라도 실패한 상태
- 중단(Aborted): 트랜잭션이 강제로 중단된 상태

### 트랜잭션 사용 시 주의사항
- 트랜잭션 내에서 데이터베이스 연산을 최소화하여 성능 저하를 방지해야 함
- 트랜잭션 내에서 오래 걸리는 작업은 피해야 함
- 트랜잭션 내에서 사용자 입력을 기다리는 등의 작업은 피해야 함
- 트랜잭션 내에서 외부 시스템과의 통신은 피해야 함


### 추가사항: 격리사항
