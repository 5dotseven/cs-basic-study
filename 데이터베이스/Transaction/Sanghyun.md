### 4. Transaction

데이터베이스에서 상태를 변화시키는 작업의 단위

하나의 쿼리문이 아니라 논리적인 작업의 순서, 단위의 작업이 모두 완전하게 실행되는 것을 보장

은행 앱을 예로 들어 사람이 돈을 입금하고, 시스템에서 전체 액수를 확인, 변경사항을 시스템에 반영, 반영 결과 출력의 4가지 단계를 하나의 트랙잭션으로 구분

4가지 단계 중 한 곳에서 오류가 발생하면 작업을 실행하기 전의 상태로 돌아가도록 보장해줌

**트랜잭션의 특징**

- 원자성

트랜잭션의 작업단위는 모두 반영되거나, 전혀 반영되지 않아야한다.

- 일관성

트랜잭션이 진행 중이더라도 다른 사용자가 데이터베이스를 변경할 시 진행 중인 데이터베이스 기준이 아닌 트랜잭션이 시작 되기 이전의 DB를 기준으로 작업이 진행되어야 하낟.

- 독립성

트랜잭션 간에 영향을 주지 않아야 한다. 이미 연산 중인 트랜잭션에 다른 트랜잭션의 연산이 끼어들어서는 안된다.

- 지속성

트랜잭션이 완전히 끝나면 결과는 영구적으로 데이터베이스에 반영되어야 한다.

**트랜잭션의 상태**

- Active

트랜잭션이 진행 중

- Partially Committed

진행 중인 트랜잭션의 변경사항이 수행되어 commit 만을 남긴 상태

- committed

트랜잭션의 변경사항이 성공적으로 데이터베이스에 반영된 상태

- Failed

트랜잭션 실행 중 오류가 발생한 상태 이후 aborted로 진행된다.

- Aborted

트랜잭션 실패로 트랜잭션 작업을 실행하기 이전 상태로 돌아간 상태

**주의점**

트랜잭션의 적용은 필수적인 곳에만 적용하는 것이 좋다. DB에서 수행할 수 있는 커넥션은 제한 적이므로 모든 요청에 트랜잭션을 붙일 경우 다른 프로그램에서 DB를 사용하고자 할 때 커넥션 고갈로 인해 대기해야 하거나 교착 상태에 빠질 가능성이 높아질 수 있다.