# NoSQL

## NoSQL 등장 배경

지난 20년간, 데이터를 저장하는 데에는 관계형 데이터베이스가 사용되었다. 

트랜잭션을 통한 안정적인 데이터 관리가 가장 중요한 이슈였기 때문이다. 

하지만 웹 2.0 환경과 빅데이터가 등장하면서 RDBMS는 난관에 부딪히게 되었는데, 데이터를 처리하는 데 필요한 비용의 증가 때문이다. 

데이터와 트래픽의 양이 기하급수적으로 증가함에 따라 한 대에서 실행되도록 설계된 관계형 데이터베이스를 사용하는 것은 하드웨어적으로 큰 비용이 들게 되었다. 

장비의 성능이 좋을수록, 성능을 향상시키는 데(Scale-up: 수직적 확장) 비용이 기하급수적으로 증가하기 때문이다.

NoSQL은 데이터의 일관성을 일부 포기한 대신 여러 대의 컴퓨터에 데이터를 분산하여 저장하는 것(Scale-out: 수평적 확장)을 목표로 등장하였다. NoSQL의 등장으로 작고 값싼 장비 여러 대로 대량의 데이터와 컴퓨팅 부하를 처리하는 것이 가능하게 되었다.

# **CAP 이론의 이해**

CAP 이론은 분산 시스템 설계에서 중요한 개념입니다. CAP는 **일관성(Consistency)**, **가용성(Availability)**, **분할 내성(Partition tolerance)**의 약자로, 이 세 가지 속성 중에서 동시에 모두를 만족시킬 수 없다는 이론입니다.

왜냐하면 일관성은 모든 노드가 동일한 시점의 데이터를 보유해야 한다는 것을 의미하고, 가용성은 모든 요청이 성공적으로 처리될 수 있어야 한다는 것을 의미합니다. 분할 내성은 네트워크 분할이 발생해도 시스템이 정상적으로 작동해야 한다는 것을 의미합니다.

CAP 이론에 따르면, 이 세 가지 속성 중 두 가지만을 만족시킬 수 있으며, 어떤 두 가지를 선택하느냐에 따라 시스템의 특성이 결정됩니다.

이는 분산 시스템을 설계할 때, 시스템의 요구 사항에 따라 적절한 속성을 선택해야 함을 의미합니다.

CAP 이론은 분산 시스템 설계의 기본적인 지침으로 사용되며, 시스템의 목적과 요구 사항에 따라 최적의 속성 조합을 선택하는 데 도움을 줍니다.

## NoSQL 데이터베이스 유형

NoSQL은 다양한 데이터 구조를 제공하여 데이터 분석, 빅데이터 관리, 소셜 네트워크, 모바일 앱 개발 등에 적용할 수 있다.

## NoSQL 데이터베이스의 데이터 모델

### 키-값 저장소

- NoSQL 데이터베이스의 가장 간단한 형태
- 키-값 저장소: 이 스키마 없는 데이터 모델은 키-값 쌍의 사전으로 구성
- 일반적으로 장바구니와 같은 사용자 세션 정보를 캐싱하고 저장하는 데 사용됨.
- 오픈 소스 키-값 데이터베이스의 예로는 Redis와 Memcached가 있다.

### 문서 저장소

- 데이터를 문서로 저장
- 반정형 데이터를 관리하는 데 도움이 될 수 있고 데이터를 JSON, XML 또는 BSON 형식으로 저장
- 데이터를 사용하는 데 필요한 번역의 양을 줄일 수 있다.
- 개발자는 데이터 스키마가 문서 간에 일치할 필요가 없기 때문에 더 많은 유연성을 얻을 수 있다
- 그러나 복잡한 트랜잭션의 경우 문제가 될 수 있으며 데이터 손상으로 이어질 수 있다.
- 문서 지향 데이터베이스의 예로는 구성 요소인 MongoDB가 있다.

### 와이드 컬럼 스토어

- 정보를 열에 저장하여 관련 없는 데이터에 추가 메모리를 할당하지 않고도 필요한 특정 열에만 액세스할 수 있다.
- 이 데이터베이스는 키-값 및 문서 저장소의 단점을 해결하기 위함이다.
- 하지만 관리하기가 더 복잡한 시스템이 될 수 있다.
- 오픈 소스, 와이드 컬럼 데이터베이스의 예로는 Apache HBase와 Apache Cassandra가 있다.

### 인메모리 저장소

데이터가 디스크가 아닌 주 메모리에 상주하므로 기존의 디스크 기반 데이터베이스보다 데이터에 더 빠르게 액세스할 수 있다.

## NoSQL 데이터베이스의 장점

각 유형의 NoSQL 데이터베이스에는 특정 사용 사례에 더 적합한 강점이 있다. 

- **비용 효율성:** 고급 상용 RDBMS를 유지하는 데는 비용이 많이 든다. NoSQL 데이터베이스는 수평으로 빠르게 확장하고 리소스를 더 잘 할당하여 비용을 최소화할 수 있습니다.
- **유연성:** 수평적 확장과 유연한 데이터 모델 덕분에 NoSQL 데이터베이스는 빠르게 변화하는 대량의 데이터를 처리할 수 있다.
- **복제:** NoSQL 복제 기능은 여러 서버에 데이터를 복사하고 저장한다. 이 복제는 데이터 안정성을 제공하여 가동 중지 시간 동안 액세스를 보장하고 서버가 오프라인 상태가 될 경우 데이터 손실을 방지합니다.
- **속도:** NoSQL은 빠르고 민첩한 스토리지 및 처리를 지원한다.

## NoSQL 데이터베이스의 단점

NoSQL에서 이야기되는 가장 큰 단점으로는 ACID 트랜잭션을 지원하지 않는다. 적절한 스키마 디자인을 제공하면 단일 레코드의 원자화는 가능하다.

> ACID
> 
- A : atomicity, 원자성
- C : consistency, 일관성
- I : isolation, 고립성
- D : durability, 지속성
