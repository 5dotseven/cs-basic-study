# 자료구조 - B-Tree & B+Tree
> B-트리와 B+ 트리는 데이터베이스 시스템과 파일 시스템에서 널리 사용되는 인덱스 구조임.
> >이진트리와 비슷하지만 하나의 노드가 가질 수 있는 자식 노드의 최대 숫자가 2보다 큰 트리구조
> 두 구조는 유사한 점이 많지만, 몇 가지 주요 차이점이 있음

### Balanced Tree
- 배경
  노드 삽입 및 삭제시 스스로 균형을 맞춰주는 트리로, 기존 이진 트리의 문제점은 좌우 균형이 맞지 않는 것
  트리가 좌우 불균형 하면 높이가 커지므로 검색하는데 상당히 비효율적(최악의 경우 O(N))
- 이것을 해결한 구조가 Balanced Tree
- 어느 경로로 가더라도 높이가 같도록 해주는 효율적인 트리
- ex> Red-Black, B-tree

### B-트리
: B-트리는 균형 이진 트리의 일반화된 형태로, `노드당 자식의 수가 두 개 이상일 수 있음`
이 구조는 데이터의 삽입, 삭제, 검색 작업을 효율적으로 수행할 수 있도록 설계되었음
각 노드는 여러 개의 키를 가질 수 있으며, 키의 수에 따라 자식 노드의 수가 결정됨

B-트리의 특징
- 모든 리프 노드는 같은 깊이에 있음.
- 노드의 키는 정렬된 상태로 유지됨.
- 각 노드는 최소 (t-1)개에서 최대 (2t-1)개의 키를 가질 수 있음 여기서 t는 트리의 최소 차수임

### B+ 트리
: B+ 트리도 B-트리와 유사하지만, 모든 데이터는 `리프 노드`에만 저장되며, 내부 노드는 데이터의 복사본이 아니라 인덱스 역할을 하는 키만을 저장함 이로 인해 B+ 트리는 일정한 규모의 데이터베이스 작업에서 B-트리보다 더 효율적일 수 있음

> B-tree에 확장 개념

B+ 트리의 특징
- 내부 노드는 자식 노드를 가리키는 키만 저장하고, 실제 데이터는 리프 노드에만 존재함
- 리프 노드는 모두 같은 레벨에 위치하며, 일반적으로 연결 리스트로 서로 연결되어 있어 범위 검색이 용이함
- 리프 노드에는 모든 키와 해당 데이터가 저장되며, 이는 순차 접근을 최적화함

![스크린샷 2024-09-04 오후 11 33 38](https://github.com/user-attachments/assets/14bbad6c-001a-423c-a6a1-75374fee3bc1)


### B-트리와 B+ 트리의 주요 차이점
1. **데이터 저장 위치**: B-트리는 모든 노드에 데이터를 저장할 수 있지만, B+ 트리는 데이터를 리프 노드에만 저장함
2. **리프 노드 연결**: B+ 트리의 리프 노드는 서로 연결되어 있어 범위 검색에 유리하지만, B-트리는 그렇지 않음
3. **공간 효율성**: B+ 트리는 내부 노드에 데이터가 저장되지 않기 때문에, 동일한 키를 저장하기 위해 더 적은 공간을 사용할 수 있음
4. **검색 효율성**: B-트리에서는 데이터를 찾기 위해 리프 노드에 도달할 필요가 없을 수 있지만, B+ 트리에서는 항상 리프 노드까지 내려가야 함. 그러나 B+ 트리에서는 리프 노드들이 연결되어 있어 범위 검색이 더 효율적임.

> 각각의 트리는 특정 애플리케이션의 요구 사항에 따라 장단점이 있으므로, 사용 사례를 고려하여 적합한 구조를 선택해야 함


참고
- https://stackoverflow.com/questions/870218/what-are-the-differences-between-b-trees-and-b-trees
- https://seunggi92.tistory.com/39 