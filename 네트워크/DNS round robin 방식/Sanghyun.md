### 5. DNS round robin 방식

---

- DNS - www.example.com의 형태로 사람이 읽을 수 있는 주소를 IP 주소호 변환해 주는 서버

**작동 방식**

1. 웹 서비스를 담당하는 서버를 하나가 아닌 여러대를 두고 각각의 IP를 가지게 한다.
2. 사용자가 서비스에 접속하기 위해 도메인 주소를 입력하면 DNS는 웹 서비스가 가지고 있는 여러대의 서버 IP 중 랜덤하게 하나 또는 여러개를 선택하여 사용자에게 반환
3. 서비스 사용자들을 여러 대의 서버에 분산하여 접속하게 하여 서버의 부하를 분산시키는 방식

**단점**

- 서버의 수 만큼 공인 IP가 필요하다.
- 모바일 사이트의 경우 프록시 서버를 경유한다. 이때 프록시 서버를 캐리어 게이트웨이라고 부르며 DNS 변환 결과가 일정 시간 캐싱되기 때문에 같은 프록시 서버를 경유하는 접속은 모두 같은 서버로 향하게 된다.
- 서버가 다운되어도 확인이 불가능해 사용자들이 다운되거나 이미 꽉 찬 서버로 접속될 수 있는 문제점이 있다.

**해결법**

- 다중화 구성
    - 각 서버에 Virtual IP를 부여해 다중화를 구성하고 AP 서버에 이상이 감지되면 다른 서버로 VIP를 이동
    - DNS 서버 테이블에 실시간으로 서버의 상태를 확인할 수 있는 컬럼과 함수를 추가하여 요청될 시 서버 상태를 반환, 우회루트 제공 및 에러 전송
- 가중치 편성
    - 각각의 웹 서버에 가중치, 처리 능력이 높은 서버의 경우 높은 가중치를 주어 DNS 서버의 선택 정도를 높여 분산하는 방식
- 최소 연결 방식
    - 접속된 클라이언트가 가장 적은 서버를 선택하게 하는 방식
    - 로드 밸러서에서 실시간 접속자 수 관리, 서버에서 현재 접속자를 주기적 통보하는 것이 중요