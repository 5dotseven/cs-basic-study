### Docker

### Container

**정의**

- 애플리케이션이 한 컴퓨팅 환경에서 다른 컴퓨팅 환경으로 빠르고 안정적으로 실행되도록 코드와 모든 종속성(환경설정)을 패키징 하는 소프트웨어 표준 단위다.
- 운영체제 수준의 가상화 기술
- 커널을 공유하면서 각 프로세스를 격리된 환경에서 실행하는 기술을 말한다.
- 즉, 컨테이너를 이용한 가상화란 OS 위에 컨테이너 관리 소프트웨어를 설치하고, 이를 이용해 별도의 논리적인 구획(컨테이너)를 만들어 그 구획마다 애플리케이션의 작동을 위한 라이브러리 및 바이너리 파일 등을 모아 둠으로써 각 컨테이너들이 별도의 서버인 것처럼 동작하도록 하는 것

**장단점**

**장점**

- 컨테이너는 별도의 하드웨어 에뮬레이션 없이 리눅스 커널을 공유하여 컨테이너를 실행하므로 게스트 OS가 필요하지 않으며, 실행 속도도 매우 빠르다.
- 오버헤드가 크지 않으며, 하나의 컴퓨터에서 여러 프로세스를 다량으로 실행할 수 있다
- 독자적인 실행 환경을 가지고 있어 개발시 개발 및 테스트 운영 환경의 표준화에도 적합하며, OS를 가리지 않아 프로그램의 개발 및 배포에도 용이

**단점**

- 호스트 OS의 커널을 공유하므로 보안 취약점이 컨테이너에 공통 적용될 수 있으며, 호스트 OS에 문제가 발생할 경우 해당 OS에서 실행되는 모든 컨테이너에 영향을 미칠 수도 있다.
- 다른 가상화 기술 대비 설정 및 관리가 복잡할 수 있으며, 여러 컨테이너 실행 시 컨테이너 간 네트워크 구성도 복잡해질 수 있다

**Docker Container**

- 가상화된 공간을 생성할때 리눅스 자체 기능을 사용하여 프로세스 단위의 격리 환경을 만듦
- 가상머신과 달리 커널을 공유해서 사용하므로, 컨테이너에는 라이브러리 및 실행파일만 있으므로 용량이 비교적 작음
- 위의 이유로 컨테이너를 만들때 배포하는 시간이 가상머신에 비해 빠르며, 사용할 때의 성능 손실 또한 거의 없음

### **Docker**



- 리눅스 컨테이너에 리눅스 어플리케이션을 프로세스 격리기술을 사용하여 더 쉽게 컨테이너로 실행하고 관리할 수 있게 해주는 오픈소스 프로젝트
- 도커는 일반적으로 도커 엔진 혹은 도커에 관련된 모든 프로젝트 의미
- 컨테이너에 필요한 기능을 거의 모두 제공하는 플랫폼
- 애플리케이션을 구동할 때 필요한 환경설정 절차를 도커파일에 작성하고 빌드하면 도커이미지가 생성이 되고 이 이미지를 실행시키면 도커컨테이너가 만들어진다.

**도커 아키텍처**

![Untitled](https://github.com/5dotseven/cs-basic-study/assets/118906074/c141c30d-9fc5-4eb0-8cb6-a5e373a83b69)

- Docker Client : 도커를 설치하면 그것이 Client,  build, pull, run 등의 도커 명령어를 수행합니다.
- DOCKER_HOST : 도커가 띄워져있는 서버. DOCKER_HOST에서 컨테이너와 이미지를 관리
- Docker daemon :도커 엔진
- Registry : 외부(remote) 이미지 저장소. 다른 사람들이 공유한 이미지를 내부(local) 도커 호스트에 pull할 수 있습니다. 이렇게 가져온 이미지를 run하면 컨테이너<br></br>

**생성 과정**

- **도커 파일**
    - 패키지, 환경변수설정 등을 기록한 파일이다.
    - docker build 명령어를 실행시키면 도커 이미지를 만들 수 있습니다.<br></br>
- **도커이미지**
    - 컨테이너 실행에 필요한 파일과 설정값, 데이터 등을 포함된 상태값이며 불변하다.
    - 하나의 이미지에서 여러개의 컨테이너를 생성할 수 있으며(1:N 관계) 컨테이너의 상태와는 무관하게 이미지는 그대로 존재
    - Docker Image를 docker run 명령어를 실행시키면 Docker Container생성<br></br>
- **도커컨테이너**
    - 컨테이너가 실행시키면 도커이미지에 설정된 프로그램, 데이터 등이 실제 컴퓨팅자원(RAM,CPU,SSD 등)과 연결된다.
    - 컨테이너를 생성하면 해당 이미지의 목적에 맞는 파일이 들어 있는, 호스트와 다른 컨테이너로부터 격리된 시스템 자원 및 네트워크를 사용할 수 있는 독립된 공간(프로세스)이 생성<br></br>

**Virtual Machine (가상머신) vs Docker Container (도커 컨테이너)**

![Untitled (1)](https://github.com/5dotseven/cs-basic-study/assets/118906074/baf78ceb-ea46-4cd0-86a0-a369c5aa78d1)

- **Virtual Machine :** 호스트 OS 위에 존재하는 하이퍼바이저(Hypervisor)를 통해 VM을 생성하고 구동하며, 각각의 VM 구성 요소마다 OS가 존재<br></br>
- **Docker Container :**  OS를 포함하고 있지 않다. 도커라는 플랫폼 위에 컨테이너들이 존재하고, 그 아래에는 호스트 OS가 존재한다. ****Docker 엔진 위에 Application 실행에 필요한 바이너리만 올라가게 됩니다.
    - Host OS 그리고 Docker 엔진위에서 바로 동작하며 Host의 커널을 공유합니다. 커널을 공유하게 되면 io처리가 쉽게 되어 성능의 효율을 높일 수 있습니다.
    - 컨테이너를 사용하는 것은 가상 머신을 생성하는 것이 아니라 Host OS가 사용하는 자원을 분리하여 여러 환경을 만들 수 있도록 하는 것입니다.
<br></br><br></br>
출처

- [https://velog.io/@9ruem2/CS지식의-정석-컨테이너container와-도커docker](https://velog.io/@9ruem2/CS%EC%A7%80%EC%8B%9D%EC%9D%98-%EC%A0%95%EC%84%9D-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88container%EC%99%80-%EB%8F%84%EC%BB%A4docker)
- https://ittrue.tistory.com/423
- [https://velog.io/@rivkode/Docker-란#countainer](https://velog.io/@rivkode/Docker-%EB%9E%80#countainer)